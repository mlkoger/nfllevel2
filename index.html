<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>NFL 3-Bar Overlay (Drag, Click-to-X)</title>
<style>
  :root{
    --bar-height: 84px; /* adjust to taste */
    --logo-height: 64px; /* logo size (keeps spacing tidy) */
    --gap: 12px;
  }
  html,body{
    margin:0;
    background:transparent; /* so OBS scene shows through */
    font-family: system-ui, Arial, sans-serif;
    user-select:none;
    overflow:hidden; /* tidy edges for overlays */
  }

  .wrap{
    display:flex;
    flex-direction:column;
    gap:10px;
    padding:8px;
  }

  /* Bars */
  .bar{
    position:relative;
    height:var(--bar-height);
    border-radius:14px;
    display:flex;
    align-items:center;
    padding-left:110px; /* room for crown on left */
    padding-right:10px;
    overflow:hidden;
    box-shadow: 0 6px 22px rgba(0,0,0,.25) inset, 0 2px 6px rgba(0,0,0,.18);
  }
  .gold { background: linear-gradient(180deg,#f7d774,#caa236); }
  .silver { background: linear-gradient(180deg,#e6e8ec,#bfc4cc); }
  .bronze { background: linear-gradient(180deg,#e1b07a,#b6804d); }

  /* Permanent crowns (left side) */
  .crown{
    position:absolute;
    left:14px; top:50%;
    transform:translateY(-50%);
    height:calc(var(--bar-height) - 22px);
    filter: drop-shadow(0 2px 4px rgba(0,0,0,.35));
    pointer-events:none;
  }

  /* Where the team logos live */
  .lane{
    display:flex;
    align-items:center;
    gap:var(--gap);
    width:100%;
    height:100%;
  }

  /* Each draggable “chip” that holds a team logo */
  .logo{
    position:relative;
    height:var(--logo-height);
    width:auto;
    aspect-ratio:1.2/1; /* helps keep touch targets reasonable */
    display:flex;
    align-items:center;
    justify-content:center;
    padding:6px 8px;
    border-radius:10px;
    background: rgba(255,255,255,.18);
    backdrop-filter: blur(2px);
    cursor:grab;
    transition: transform .08s ease;
  }
  .logo:active{ cursor:grabbing; transform:scale(1.03); }
  .logo img{ height:100%; width:auto; display:block; }

  /* Red “X” overlay when selected */
  .logo.crossed::before,
  .logo.crossed::after{
    content:"";
    position:absolute; inset:10%;
    border-top:6px solid red;
    transform-origin:center;
    pointer-events:none;
    filter: drop-shadow(0 0 2px rgba(0,0,0,.6));
  }
  .logo.crossed::before{ transform: rotate(45deg); }
  .logo.crossed::after { transform: rotate(-45deg); }

  /* Visual cue when dragging over a spot */
  .drop-hint{
    outline: 3px dashed rgba(255,255,255,.75);
    border-radius: 12px;
  }

  /* Make sure the whole thing scales nicely if you resize the browser source */
  @media (max-width: 900px){
    :root{ --bar-height:72px; --logo-height:54px; --gap:10px; }
  }
  @media (max-width: 700px){
    :root{ --bar-height:64px; --logo-height:46px; --gap:8px; }
  }
</style>
</head>
<body>
<div class="wrap" id="wrap">
  <!-- GOLD -->
  <div class="bar gold" data-lane="gold">
    <img class="crown" alt="Crown"
      src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4b/Gold_crown_2.png/200px-Gold_crown_2.png">
    <div class="lane" id="lane-gold"></div>
  </div>

  <!-- SILVER -->
  <div class="bar silver" data-lane="silver">
    <img class="crown" alt="Crown"
      src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4b/Gold_crown_2.png/200px-Gold_crown_2.png">
    <div class="lane" id="lane-silver"></div>
  </div>

  <!-- BRONZE -->
  <div class="bar bronze" data-lane="bronze">
    <img class="crown" alt="Crown"
      src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4b/Gold_crown_2.png/200px-Gold_crown_2.png">
    <div class="lane" id="lane-bronze"></div>
  </div>
</div>

<script>
/* ========= Config: team -> logo URL (ESPN CDN, 500px PNGs) ========= */
const TEAMS = [
  ["ARI","https://a.espncdn.com/i/teamlogos/nfl/500/ari.png"],
  ["ATL","https://a.espncdn.com/i/teamlogos/nfl/500/atl.png"],
  ["BAL","https://a.espncdn.com/i/teamlogos/nfl/500/bal.png"],
  ["BUF","https://a.espncdn.com/i/teamlogos/nfl/500/buf.png"],
  ["CAR","https://a.espncdn.com/i/teamlogos/nfl/500/car.png"],
  ["CHI","https://a.espncdn.com/i/teamlogos/nfl/500/chi.png"],
  ["CIN","https://a.espncdn.com/i/teamlogos/nfl/500/cin.png"],
  ["CLE","https://a.espncdn.com/i/teamlogos/nfl/500/cle.png"],
  ["DAL","https://a.espncdn.com/i/teamlogos/nfl/500/dal.png"],
  ["DEN","https://a.espncdn.com/i/teamlogos/nfl/500/den.png"],
  ["DET","https://a.espncdn.com/i/teamlogos/nfl/500/det.png"],
  ["GB" , "https://a.espncdn.com/i/teamlogos/nfl/500/gb.png"],
  ["HOU","https://a.espncdn.com/i/teamlogos/nfl/500/hou.png"],
  ["IND","https://a.espncdn.com/i/teamlogos/nfl/500/ind.png"],
  ["JAX","https://a.espncdn.com/i/teamlogos/nfl/500/jax.png"],
  ["KC" ,"https://a.espncdn.com/i/teamlogos/nfl/500/kc.png"],
  ["LV" ,"https://a.espncdn.com/i/teamlogos/nfl/500/lv.png"],
  ["LAC","https://a.espncdn.com/i/teamlogos/nfl/500/lac.png"],
  ["LAR","https://a.espncdn.com/i/teamlogos/nfl/500/lar.png"],
  ["MIA","https://a.espncdn.com/i/teamlogos/nfl/500/mia.png"],
  ["MIN","https://a.espncdn.com/i/teamlogos/nfl/500/min.png"],
  ["NE" ,"https://a.espncdn.com/i/teamlogos/nfl/500/ne.png"],
  ["NO" ,"https://a.espncdn.com/i/teamlogos/nfl/500/no.png"],
  ["NYG","https://a.espncdn.com/i/teamlogos/nfl/500/nyg.png"],
  ["NYJ","https://a.espncdn.com/i/teamlogos/nfl/500/nyj.png"],
  ["PHI","https://a.espncdn.com/i/teamlogos/nfl/500/phi.png"],
  ["PIT","https://a.espncdn.com/i/teamlogos/nfl/500/pit.png"],
  ["SF" ,"https://a.espncdn.com/i/teamlogos/nfl/500/sf.png"],
  ["SEA","https://a.espncdn.com/i/teamlogos/nfl/500/sea.png"],
  ["TB" ,"https://a.espncdn.com/i/teamlogos/nfl/500/tb.png"],
  ["TEN","https://a.espncdn.com/i/teamlogos/nfl/500/ten.png"],
  ["WSH","https://a.espncdn.com/i/teamlogos/nfl/500/wsh.png"], // Commanders
];

/* ========= Helpers ========= */
const byId = id => document.getElementById(id);
const lanes = { gold: byId("lane-gold"), silver: byId("lane-silver"), bronze: byId("lane-bronze") };
const STORAGE_KEY = "nfl_three_bar_layout_v1";

function makeLogo(teamCode, url){
  const el = document.createElement("div");
  el.className = "logo";
  el.draggable = true;
  el.dataset.team = teamCode;
  el.innerHTML = `<img alt="${teamCode}" src="${url}" />`;

  // Toggle red X on click
  el.addEventListener("click", (e)=>{
    // ignore if mid-drag
    if (dragState.dragging) return;
    el.classList.toggle("crossed");
    saveLayout();
  });

  // Drag logic
  el.addEventListener("dragstart",(e)=>{
    dragState.dragging = el;
    e.dataTransfer.setData("text/plain", teamCode);
    e.dataTransfer.effectAllowed = "move";
    requestAnimationFrame(()=> el.classList.add("dragging"));
  });
  el.addEventListener("dragend",()=>{
    dragState.dragging = null;
    el.classList.remove("dragging");
    document.querySelectorAll(".drop-hint").forEach(n=>n.classList.remove("drop-hint"));
    saveLayout();
  });

  return el;
}

// Figure out where to insert while dragging over a lane
function positionForInsertion(container, clientX){
  const siblings = [...container.querySelectorAll(".logo:not(.dragging)")];
  let afterNode = null;
  for (const sib of siblings){
    const rect = sib.getBoundingClientRect();
    const midpoint = rect.left + rect.width/2;
    if (clientX > midpoint) afterNode = sib;
  }
  return afterNode;
}

const dragState = { dragging:null };

for (const [name, laneEl] of Object.entries(lanes)){
  // Allow drops
  ["dragover","dragenter"].forEach(ev=>{
    laneEl.addEventListener(ev, (e)=>{
      e.preventDefault();
      const after = positionForInsertion(laneEl, e.clientX);
      laneEl.querySelectorAll(".logo").forEach(n=>n.classList.remove("drop-hint"));
      if (after) after.classList.add("drop-hint");
    });
  });

  laneEl.addEventListener("dragleave", ()=> {
    laneEl.querySelectorAll(".logo").forEach(n=>n.classList.remove("drop-hint"));
  });

  laneEl.addEventListener("drop",(e)=>{
    e.preventDefault();
    const dragged = dragState.dragging;
    if(!dragged) return;
    const after = positionForInsertion(laneEl, e.clientX);
    if (after) after.after(dragged); else laneEl.prepend(dragged);
    laneEl.querySelectorAll(".logo").forEach(n=>n.classList.remove("drop-hint"));
  });
}

/* ========= Initial placement (evenly split 32 -> 11 / 11 / 10) ========= */
function initialLayout(){
  const G = TEAMS.slice(0,11);
  const S = TEAMS.slice(11,22);
  const B = TEAMS.slice(22);
  for (const [t,u] of G) lanes.gold.appendChild(makeLogo(t,u));
  for (const [t,u] of S) lanes.silver.appendChild(makeLogo(t,u));
  for (const [t,u] of B) lanes.bronze.appendChild(makeLogo(t,u));
}

/* ========= Save/Load layout ========= */
function saveLayout(){
  const data = {};
  for (const [laneName, laneEl] of Object.entries(lanes)){
    data[laneName] = [...laneEl.querySelectorAll(".logo")].map(el=>({
      team: el.dataset.team,
      x: el.classList.contains("crossed") ? 1 : 0
    }));
  }
  localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
}

function loadLayout(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    if(!raw) return false;
    const data = JSON.parse(raw);
    const urlByTeam = Object.fromEntries(TEAMS);
    for (const [laneName, items] of Object.entries(data)){
      for (const item of items){
        const el = makeLogo(item.team, urlByTeam[item.team]);
        if (item.x) el.classList.add("crossed");
        lanes[laneName].appendChild(el);
      }
    }
    return true;
  }catch(e){ console.warn(e); return false; }
}

/* Boot */
if (!loadLayout()) initialLayout();
</script>
</body>
</html>
